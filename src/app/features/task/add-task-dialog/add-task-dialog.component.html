<dialog
  #dialog
  class="dialog"
  [ngClass]="{
    open: isOpen
  }"
  appTheme
  [systemThemeClass]="'dialog-theme-system'"
  [lightThemeClass]="'dialog-theme-light'"
  [darkThemeClass]="'dialog-theme-dark'"
>
  <app-custom-icon-button
    class="close-btn"
    [iconAlt]="'close'"
    [iconPath]="'assets/close-svgrepo-com.svg'"
    [buttonPaint]="'red'"
    (clickedButtonEvent)="closeDialog()"
    [iconHeight]="'medium'"
    [rounded]="true"
  ></app-custom-icon-button>
  <div class="content">
    <form [formGroup]="taskForm" (ngSubmit)="submit()" class="form">
      <div>
        <input
          class="text-input"
          [ngClass]="{'text-input-error-border':taskForm.get('name')?.errors?.['required']  && !taskForm.get('name')?.pristine}"
          appTheme
          [systemThemeClass]="'text-input-theme-system'"
          [lightThemeClass]="'text-input-theme-light'"
          [darkThemeClass]="'text-input-theme-dark'"
          id="name"
          type="text"
          formControlName="name"
          placeholder="Subject"
        />
        <app-input-error
          *ngIf="taskForm.get('name')?.errors?.['required']  && !taskForm.get('name')?.pristine"
        >
          This value is required
        </app-input-error>
      </div>

      <div>
        <textarea
          class="text-input text-area-input"
          [ngClass]="{'text-input-error-border':taskForm.get('description')?.errors?.['minlength']  && !taskForm.get('description')?.pristine}"
          appTheme
          [systemThemeClass]="'text-input-theme-system'"
          [lightThemeClass]="'text-input-theme-light'"
          [darkThemeClass]="'text-input-theme-dark'"
          id="description"
          rows="5"
          cols="33"
          formControlName="description"
          placeholder="Please add descriptive text to help others better understand this task"
        >
        </textarea>
        <app-input-error
          *ngIf="taskForm.get('description')?.errors?.['minlength']  && !taskForm.get('description')?.pristine"
        >
          Description must be at least <strong> 10 characters </strong> long
        </app-input-error>
      </div>

      <div>
        <label for="due-date" class="label">Due date: </label>
        <input
          class="text-input"
          appTheme
          [systemThemeClass]="'text-input-theme-system'"
          [lightThemeClass]="'text-input-theme-light'"
          [darkThemeClass]="'text-input-theme-dark'"
          id="due-date"
          type="date"
          formControlName="dueDate"
        />
      </div>

      <app-alert-message
        *ngIf="thereWasAnError"
        [color]="'red'"
        [closable]="true"
        (closeSignal)="handleAlertClose()"
      >
        There was a problem creating your task... try again later
      </app-alert-message>

      <app-custom-button
        [disabled]="!taskForm.valid || submitting"
        class="create-btn"
        [text]="'Create'"
        [buttonPaint]="'primary'"
        [buttonHeight]="'medium'"
      ></app-custom-button>
      <div class="loading-spinner">
        <app-loading-spinner
          *ngIf="submitting"
          [color]="'green'"
        ></app-loading-spinner>
      </div>
    </form>
  </div>
</dialog>
